<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title> this is beta</title>
  </head>
  <body>
	tes download csv
	<script>
		var rawsensor=[
			['timestamp','ay'],
		];
		var count=0;
		var ay = 0;	
		var time = 0;
		//rawsensor.push(['11.00.00',1])

		if (window.DeviceMotionEvent == undefined) {
			//No accelerometer is present. Use buttons. 
			console.log('no');
		}
		else {
			console.log('yes');
			window.addEventListener("devicemotion", accelerometerUpdate, true);
		}
		function accelerometerUpdate(event) {
			console.log('ini');
			ay = event.acceleration.y;
			time = new Date().getTime(); 
			let counting = document.getElementById("itung");
			let data= document.getElementById("datanya");
			if (count>=0){
				//rawsensor.push([time,gx,gy,gz,ax,ay,az]);
				rawsensor.push([time,ay]);
				count++;
				console.log(count);
			}
			if (count==6000){
				let csvContent = "data:text/csv;charset=utf-8," + rawsensor.map(e => e.join(",")).join("\n");
		
				var encodedUri = encodeURI(csvContent);
				var link = document.createElement("a");
				link.setAttribute("href", encodedUri);
				link.setAttribute("download", "datamentah.csv");
				document.body.appendChild(link); // Required for FF
				link.click(); // This will download the data file named "my_data.csv".
				count=0;
			}
			counting.innerHTML=count;
			data.innerHTML=time+','+ay;
		}
	</script>
	<p id="itung">counting</p>
	<p id="datanya">data</p>
  </body>
</html>
